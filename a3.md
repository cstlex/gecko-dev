https://bugzilla.mozilla.org/show_bug.cgi?id=1530799

(A patch has been submmited to Mozilla)

## Diagnosis

The issue is the usage of `waitForCondition` function in `browser_940307_panel_click_closure_handling.js` test file. According to the function name, it seems that the function is being called to wait for a certain condition to return true while testing. I searched up for its definition to find out where it is defined and what exactly it does. However, the project contains numbers of similar functions, which makes it hard to identify.

The potential risk lies in refactoring code in the future. It would be extremely difficult for the contributors to figure out the function and would require the changes in related files. It would be really time-consuming and inefficient. Fixing this issue will make code more readable and maintainable for all contributors.

## Solution

Since a number of functions either with the same name or with the same functionality is found, I would suggest a modularization by creating a general utility module that contains a collection of functions for testing.

The issue reporter hinted that the contributors should look into `testing/modules/TestUtils.jsm` file and use function from this module. New `waitForCondition` function is already implemented in the module, which does exactly the same thing as the original function does. Fixing the issue is simple enough, it just requires replacing `waitForCondition` with `TestUtils.waitForCondition`.

## Testing

1. Run test using `./mach mochitest` on original `browser_940307_panel_click_closure_handling.js` test file and check if the test returns OK.
2. Replace `waitForCondition` with `TestUtils.waitForCondition` in the file.
3. Run the same test again on the modified test file and compare the result.

The issue is the successfully fixed as long as the both test runs output the same result.
The fix now ensures code readability and maintainability.
